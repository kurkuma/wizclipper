<!DOCTYPE html>
<html>
  <head>
	<link rel="stylesheet" type="text/css" href="css/options.css" />
    <script type="text/javascript" src="script/lib/jquery-1.7.1.min.js"></script>

    <script type="text/javascript">
        function localizeBlock(block) {
            if (block.attr("message"))
                localizeElement(block);
            var siblings = block.find("[message], [placeholder], [title]");
            for ( var i = 0; i < siblings.length; i++) {
                var sibling = $(siblings.get(i));
                localizeElement(sibling);
            }
        }

        function localizeElement(element, force) {
            if (!force && element.attr("localized")
                && element.attr("localized") == "true") {
                    return;
            }

            var field = extractLocalizationField(element);
            var placeholderField = extractLocalizationPlaceholderField(element);
            var titleField = extractLocalizationTitleField(element);
            var fieldData = extractLocalizationDataField(element);
            var localized = false;

            if (field) {
                if (fieldData) {
                    var msg = chrome.i18n.getMessage(field, fieldData);
                } else {
                    var msg = chrome.i18n.getMessage(field);
                }
                if (element.attr("tagName") == "INPUT") {
                    element.attr("value", msg);
                } else {
                    element.html(msg);
                }
                localized = true;
            }

            if (placeholderField) {
                var msg = chrome.i18n.getMessage(placeholderField);
                element.attr("placeholder", msg);
                localized = true;
            }

            if (titleField) {
                var msg = chrome.i18n.getMessage(titleField);
                element.attr("title", msg);
                localized = true;
            }

            if (localized) {
                element.attr("localized", "true");
            }
        }

        function extractLocalizationField(element) {
            if (typeof element.attr == 'function' && element.attr("message"))
                return element.attr("message");
            else
                return null;
        }

        function extractLocalizationPlaceholderField(element) {
            if (typeof element.attr == 'function' && element.attr("placeholder"))
                return element.attr("placeholder");
            else
                return null;
        }

        function extractLocalizationTitleField(element) {
            if (typeof element.attr == 'function' && element.attr("title"))
                return element.attr("title");
            else
                return null;
        }

        function extractLocalizationDataField(element) {
            if (typeof element.attr == 'function' && element.attr("messagedata")) {
                var v = element.attr("messagedata");
                try {
                    v = eval(v);
                } catch (e) {}
                if (!(v instanceof Array))
                    v = [ v ];
                    return v;
                } else {
                    return null;
            }
        }

        $(document).ready(function() {
            localizeBlock($("body"));
        });
    </script>
  </head>
  <body class="options">
    <div id="optionsView" class="vignette">
    <div class="vignetteContent">
      <div id="optionsHeader">
        <img src="images/logo.png"/>
      </div>
      <form name="optionsForm" class="optionsForm" action="#">
        <div id="optionsContainer">
        <h2 message="options_title"></h2>
        <table class="simpleOptions">
          <tr id="noteSelectClipperContainer">
            <td>
              <label for="noteSelectClipper" message="options_noteSelectClipper"></label>
            </td>
            <td>
              <select name="noteSelectClipper">
                <option value='{"order":1,"ascending":false}' message="options_noteSelectClipper_Client"></option>
                <option value='{"order":1,"ascending":true}' message="options_noteSelectClipper_Extension"></option>
              </select>
            </td>
          </tr>

          <tr id="clipStyleContainer">
            <td>
              <label for="clipStyle" message="options_clipStyle"></label>
            </td>
            <td>
              <div class="radioGroup">
                <input type="radio" name="clipStyle" value="0" id="clipStyle0"/><label for="clipStyle0" message="options_clipStyle_none"></label><br/>
                <input type="radio" name="clipStyle" value="1" id="clipStyle1"/><label for="clipStyle1" message="options_clipStyle_text"></label><br/>
                <input type="radio" name="clipStyle" value="2" id="clipStyle2"/><label for="clipStyle2" message="options_clipStyle_full"></label>
              </div>
            </td>
          </tr>

          <tr id="clipActionContainer">
            <td>
              <label for="clipAction" message="options_clipAction"></label>
            </td>
            <td>
              <select name="clipAction">
                <option value="0" message="options_clipAction_article"></option>
                <option value="1" message="options_clipAction_fullPage"></option>
                <option value="2" message="options_clipAction_url"></option>
              </select>
            </td>
          </tr>

          <tr id="notificationsContainer">
            <td>
              <label for="clipNotificationEnabled" message="options_clipNotificationEnabled"></label>
            </td>
            <td>
              <input type="checkbox" id="clipNotificationEnabled" name="clipNotificationEnabled"/>
              <div class='optionsDescription' message="options_clipNotificationEnabledDescription"></div>
            </td>
          </tr>

          <tr id="contextMenuContainer">
            <td>
              <label for="useContextMenu" message="options_useContextMenu"></label>
            </td>
            <td>
              <input type="checkbox" id="useContextMenu" name="useContextMenu"/>
              <div class='optionsDescription' message="options_useContextMenuDescription"></div>
            </td>
          </tr>

          <tr id="searchHelperContainer">
            <td>
              <label for="useSearchHelper" message="options_useSearchHelper"></label>
            </td>
            <td>
              <input type="checkbox" id="useSearchHelper" name="useSearchHelper"/>
              <div class='optionsDescription' message="options_useSearchHelperDescription"></div>
            </td>
          </tr>

        </table>
        </div>

        <button message="options_submit"/>&nbsp;
        <button message="options_reset" onclick="options.resetOptionsForm(); return false;"/>&nbsp;
        <span id="submitMessage"></span>
      </form>
    </div> <!-- /vignetteContent -->
    </div> <!-- /vignette -->
    <div class="copyright" message="copyright"></div>
  </body>
</html>
